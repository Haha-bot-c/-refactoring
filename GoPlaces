// Этот скрипт используется для перемещения игрока между различными точками на сцене.
using UnityEngine;

public class GoPlaces : MonoBehaviour
{
    // Скорость передвижения игрока.
    [SerializeField] private float _moveSpeed = 10;
    
    // Массив трансформаций точек, в которые игрок может переместиться.
    [SerializeField] private Transform[] _arrayPlaces;

    // Индекс текущей точки, к которой движется игрок.
    private int _currentPlaceIndex = 0;

    void Update()
    {
        // Получить текущую точку, к которой движется игрок.
        Transform currentPlace = _arrayPlaces[_currentPlaceIndex];

        // Переместить игрока к текущей точке.
        transform.position = Vector3.MoveTowards(transform.position, currentPlace.position, _moveSpeed * Time.deltaTime);

        // Если игрок достиг текущей точки, переместиться к следующей точке.
        if (transform.position == currentPlace.position)
            NextPlace();
    }

    void NextPlace()
    {
        // Увеличить индекс текущей точки.
        _currentPlaceIndex = (_currentPlaceIndex + 1) % _arrayPlaces.Length;

        // Получить следующую точку, к которой переместится игрок.
        Transform nextPlace = _arrayPlaces[_currentPlaceIndex];

        // Повернуть игрока лицом к следующей точке.
        transform.forward = nextPlace.position - transform.position;
    }
}
